{
  "name": "Code Quality Check",
  "description": "Comprehensive code quality analysis and improvement workflow",
  "version": "1.0.0",
  "author": "ManagerAgentAI",
  "steps": [
    {
      "name": "Initialize Quality Check",
      "type": "file",
      "operation": {
        "operation": "write",
        "path": "quality-report.md",
        "content": "# Code Quality Report\n\nGenerated on {{date}}\n\n## Project: {{projectName}}\n\n---\n\n"
      }
    },
    {
      "name": "Static Analysis",
      "type": "parallel",
      "steps": [
        {
          "name": "ESLint Analysis",
          "type": "command",
          "command": "cd {{projectPath}} && npm run lint -- --format json > lint-results.json",
          "onError": "continue"
        },
        {
          "name": "TypeScript Check",
          "type": "command",
          "command": "cd {{projectPath}} && npx tsc --noEmit --pretty false > type-check-results.txt 2>&1",
          "onError": "continue"
        },
        {
          "name": "Prettier Check",
          "type": "command",
          "command": "cd {{projectPath}} && npx prettier --check . > prettier-results.txt 2>&1",
          "onError": "continue"
        }
      ]
    },
    {
      "name": "Security Analysis",
      "type": "parallel",
      "steps": [
        {
          "name": "NPM Audit",
          "type": "command",
          "command": "cd {{projectPath}} && npm audit --json > security-audit.json",
          "onError": "continue"
        },
        {
          "name": "Dependency Check",
          "type": "command",
          "command": "cd {{projectPath}} && npx npm-check-updates --json > dependency-check.json",
          "onError": "continue"
        }
      ]
    },
    {
      "name": "Test Coverage Analysis",
      "type": "command",
      "command": "cd {{projectPath}} && npm run test:coverage",
      "onError": "continue"
    },
    {
      "name": "Performance Analysis",
      "type": "command",
      "command": "cd {{projectPath}} && npm run build && npx lighthouse {{projectPath}}/dist --output json --output-path lighthouse-report.json",
      "onError": "continue"
    },
    {
      "name": "Generate Quality Report",
      "type": "file",
      "operation": {
        "operation": "append",
        "path": "quality-report.md",
        "content": "## Analysis Results\n\n### Linting\n- **Status**: {{lintStatus}}\n- **Issues Found**: {{lintIssues}}\n- **Details**: [View Lint Results](lint-results.json)\n\n### Type Checking\n- **Status**: {{typeCheckStatus}}\n- **Details**: [View Type Check Results](type-check-results.txt)\n\n### Code Formatting\n- **Status**: {{prettierStatus}}\n- **Details**: [View Prettier Results](prettier-results.txt)\n\n### Security\n- **Vulnerabilities**: {{securityVulnerabilities}}\n- **Details**: [View Security Audit](security-audit.json)\n\n### Dependencies\n- **Outdated Packages**: {{outdatedPackages}}\n- **Details**: [View Dependency Check](dependency-check.json)\n\n### Test Coverage\n- **Coverage**: {{testCoverage}}%\n- **Details**: [View Coverage Report](coverage/)\n\n### Performance\n- **Lighthouse Score**: {{lighthouseScore}}\n- **Details**: [View Lighthouse Report](lighthouse-report.json)\n\n---\n\n## Recommendations\n\n{{recommendations}}\n\n---\n\n*Report generated by ManagerAgentAI Code Quality Workflow*"
      }
    },
    {
      "name": "Auto-fix Issues",
      "type": "parallel",
      "steps": [
        {
          "name": "Fix Linting Issues",
          "type": "command",
          "command": "cd {{projectPath}} && npm run lint:fix",
          "onError": "continue"
        },
        {
          "name": "Format Code",
          "type": "command",
          "command": "cd {{projectPath}} && npm run format",
          "onError": "continue"
        }
      ]
    },
    {
      "name": "Create Quality Badge",
      "type": "file",
      "operation": {
        "operation": "write",
        "path": "quality-badge.svg",
        "content": "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"120\" height=\"20\"><rect width=\"120\" height=\"20\" fill=\"#{{badgeColor}}\"/><text x=\"60\" y=\"14\" text-anchor=\"middle\" fill=\"white\" font-family=\"Arial\" font-size=\"12\">Quality: {{qualityScore}}%</text></svg>"
      }
    },
    {
      "name": "Send Quality Report",
      "type": "notification",
      "notification": {
        "message": "Code quality analysis completed for {{projectName}}",
        "type": "{{notificationType}}",
        "details": {
          "qualityScore": "{{qualityScore}}%",
          "issuesFound": "{{totalIssues}}",
          "reportPath": "quality-report.md"
        }
      }
    }
  ]
}
